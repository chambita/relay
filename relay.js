var relay=function(g){function i(b){"string"==typeof b&&(b=g.document.getElementById(b));return h[b._relayAppId]}function f(b,c,a){c=o.call(arguments,1);a=c.pop();if(!a||a==g)throw l;a.nodeType||(a=a.relayBaseNode||a.preventDefault&&a.target||a.srcElement||a);if(!a.nodeType)throw l;var e,d;if(typeof b==j)for(;a;){if(a._relayAppId&&(d=i(a)))return b.apply(d,c)||d;a=a.parentNode}else{for(;a;){if(a._relayAppId&&(d=i(a))&&d[b])if(e=d[b].apply(d,c),e!=f.BUBBLE)return e||d;a=a.parentNode}return e}}var h= {},m=1,j="function",l="invalid 'this'",o=Array.prototype.slice;f.hookObjectToNode=function(b,c){if(1!=c.nodeType)throw c;c._relayAppId||(c._relayAppId=++m,h[m]=b,b.relayBaseNode=c)};f.unhookObject=function(b){var b=b.relayBaseNode||b,c=b._relayAppId;h[c].relayBaseNode=b._relayAppId=null;delete h[c]};f.start=f.initTree=function(b){if(!b||!b.nodeType)b=g.document.body||g.document.documentElement;var c,a=0,e=b.getElementsByTagName("INS"),d="INS"==b.nodeName?b:e[a++],h=f.loadObject;do if(!d._relayAppId&& "js:"==(c=d.cite).substr(0,3))c=c.substr(3),"relay.ignore"==c?a+=d.getElementsByTagName("INS").length:h(c,d);while(d=e[a++]);return i(b)};f.loadObject=function(b,c){var a,e=g,d=b;if(a=e[d])e=a;else{a=0;for(d=d.split(".");d[a]&&(e=e[d[a++]]););}e&&f.initAndHookObject(e,b,c)};f.initAndHookObject=function(b,c,a){if(typeof b==j)b=new b(c,a);else if(typeof b.getInstance==j&&(b=b.getInstance(c,a),!b))throw c;f.hookObjectToNode(b,a)};f.unload=function(){h={}};f.publish=function(b,c,a){c=o.call(arguments, 1);a=c.pop();if(!a||a==g)throw l;a.nodeType||(a=a.relayBaseNode||a.preventDefault&&a.target||a.srcElement||a);if(!a.nodeType)throw l;for(var e,d,h,j=a,k=0,n=a.getElementsByTagName("INS");a;)try{for(;a=n[k];)a._relayAppId&&((e=i(a))&&(d=e.subscribe)&&d[b])&&d[b].apply(e,c),n[k]==a&&k++}catch(m){h=m,n[k]==a&&k++}h&&f("onPubSubError",h,j)};f.byId=f.getObjectFromNode=i;f.BUBBLE={};return f}(this);relay.handler=function(g){g=g||event;relay("on"+g.type,g,g.target||g.srcElement)};