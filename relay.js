var relay=function(g){function j(b){"string"==typeof b&&(b=g.document.getElementById(b));return h[b._relayAppId]}function f(b,c,a){c=m.call(arguments,1);a=c.pop();if(!a||a==g)throw k;a.nodeType||(a=a.relayBaseNode||a.preventDefault&&a.target||a.srcElement||a);if(!a.nodeType)throw k;var e,d;if(typeof b==i)for(;a;){if(a._relayAppId&&(d=j(a)))return b.apply(d,c)||d;a=a.parentNode}else{for(;a;){if(a._relayAppId&&(d=j(a))&&d[b])if(e=d[b].apply(d,c),e!=f.BUBBLE)return e||d;a=a.parentNode}return e}}var h= {},l=1,i="function",k="invalid 'this'",m=Array.prototype.slice;f.hookObjectToNode=function(b,c){if(1!=c.nodeType)throw c;c._relayAppId||(c._relayAppId=++l,h[l]=b,b.relayBaseNode=c)};f.unhookObject=function(b){var b=b.relayBaseNode||b,c=b._relayAppId;h[c].relayBaseNode=b._relayAppId=null;delete h[c]};f.start=f.initTree=function(b){if(!b||!b.nodeType)b=g.document.body||g.document.documentElement;var c,a=0,e=b.getElementsByTagName("INS"),b="INS"==b.nodeName?b:e[a++],d=f.loadObject;do if(!b._relayAppId&& "js:"==(c=b.cite).substr(0,3))c=c.substr(3),"relay.ignore"==c?a+=b.getElementsByTagName("INS").length:d(c,b);while(b=e[a++])};f.loadObject=function(b,c){var a,e=g,d=b;if(a=e[d])e=a;else{a=0;for(d=d.split(".");d[a]&&(e=e[d[a++]]););}e&&f.initAndHookObject(e,b,c)};f.initAndHookObject=function(b,c,a){if(typeof b==i)b=new b(c,a);else if(typeof b.getInstance==i&&(b=b.getInstance(c,a),!b))throw c;f.hookObjectToNode(b,a)};f.unload=function(){h={}};f.publish=function(b,c,a){c=m.call(arguments,1);a=c.pop(); if(!a||a==g)throw k;a.nodeType||(a=a.relayBaseNode||a.preventDefault&&a.target||a.srcElement||a);if(!a.nodeType)throw k;for(var e,d,h,i=a,l=0,n=a.getElementsByTagName("INS");a;)try{for(;a=n[l++];)a._relayAppId&&((e=j(a))&&(d=e.subscribe)&&d[b])&&d[b].apply(e,c)}catch(o){h=o}h&&f("onPubSubError",h,i)};f.byId=f.getObjectFromNode=j;f.BUBBLE={};return f}(this);relay.handler=function(g){g=g||event;relay(g.type,g,g.target||g.srcElement)};